<?php
/**
 * Created by PhpStorm.
 * User: lorenzo
 * Date: 20/10/15
 * Time: 11.05
 */

namespace tests;
use LorenzoGiust\GeoLaravel\Point as Point;
use LorenzoGiust\GeoLaravel\LineString as LineString;
use LorenzoGiust\GeoLaravel\Geo as Geo;

class TestSpatialGeometry extends \PHPUnit_Framework_TestCase {

    public function testCreateObject(){

// TODO: aggiungere test per schema

    }

    public function testContains(){

        $cia_polygon = \LorenzoGiust\GeoLaravel\Polygon::import('41.8102359855 12.589344978300005, 41.8070211864 12.592649459799986, 41.8053257547 12.59294986719999, 41.8032783812 12.59466648099999, 41.8021267048 12.594838142400022, 41.7979677012 12.59801387790003, 41.796975899 12.599086761499962, 41.7955681533 12.60003089899999, 41.7953441909 12.600588798499984, 41.7926565811 12.602348327599998, 41.792592589 12.603163719199983, 41.7882409776 12.603464126599988, 41.7881289837 12.600760459900016, 41.7880489879 12.598185539200017, 41.7880729867 12.597455978400035, 41.7882249785 12.596726417500008, 41.796959902 12.587971687300069, 41.7976337695 12.587268948600013, 41.7986755507 12.58609414099999, 41.800535118 12.584002017999978, 41.8015148684 12.583090066900013, 41.8025425904 12.582285404199979, 41.8052857676 12.579495906800048, 41.8067932654 12.578026056300018, 41.8082367513 12.576899528500007, 41.8096122311 12.579624652900065, 41.8109237077 12.582349777199966, 41.8094283024 12.584238052399996, 41.8092243808 12.585192918799976, 41.8092203823 12.586126327499983, 41.8098521374 12.587478160899991, 41.8105958411 12.588797807699962, 41.8105278685 12.589092850700013, 41.8102359855 12.589344978300005');

        $pointok = new Point(41.80433406634592, 12.589302062988281);
        $pointko = new Point(1,2);

        assertTrue(Geo::contains($cia_polygon,$pointok));
        assertFalse(Geo::contains($cia_polygon,$pointko));

    }

    public function testIntersect(){
        $p1 = new Point(41.92986831448579, 12.429313659667969);
        $p2 = new Point(41.875696393231, 12.557373046875);

        $p3 = new Point(41.93982889838199, 12.515830993652344);
        $p4 = new Point(41.859844975978454, 12.423820495605469);

        $l1 = new LineString([$p1, $p2]);
        $l2 = new LineString([$p3, $p4]);

        $res = Geo::intersect($l1, $l2);
        assertTrue(count($res) > 0);
        assertTrue($res[0] instanceof Point);

    }

    public function testPointInsertion(){
        $l = LineString::import('41.90572 12.482040000000001, 41.905440000000006 12.481330000000002, 41.90514 12.48051, 41.90484 12.47971, 41.904650000000004 12.4792, 41.904560000000004 12.478950000000001, 41.904560000000004 12.478950000000001, 41.904500000000006 12.47897, 41.904180000000004 12.479130000000001, 41.903740000000006 12.47929, 41.90319 12.47952, 41.903040000000004 12.479590000000002, 41.902480000000004 12.47981, 41.90187 12.48009, 41.901740000000004 12.48013, 41.901610000000005 12.48018, 41.90133 12.480300000000002, 41.901230000000005 12.480340000000002, 41.90106 12.480410000000001, 41.900800000000004 12.480530000000002, 41.90055 12.480640000000001, 41.9001 12.48084, 41.89983 12.480950000000002, 41.899770000000004 12.48098, 41.89941 12.481110000000001, 41.899350000000005 12.48113, 41.89898 12.48126, 41.898950000000006 12.48127, 41.89865 12.48141, 41.898340000000005 12.48155, 41.89739 12.48193, 41.896820000000005 12.482170000000002, 41.8967 12.48225, 41.8967 12.48225, 41.89658 12.482180000000001, 41.896460000000005 12.48215, 41.89632 12.48215, 41.89629 12.482120000000002, 41.896280000000004 12.482120000000002, 41.89627 12.482120000000002, 41.89618 12.482120000000002, 41.89594 12.4822, 41.895830000000004 12.48225, 41.89575000000001 12.4823, 41.895680000000006 12.48235, 41.895630000000004 12.482420000000001, 41.895630000000004 12.482420000000001, 41.895500000000006 12.482310000000002, 41.89528000000001 12.481810000000001, 41.89528000000001 12.481710000000001, 41.895250000000004 12.48149, 41.895250000000004 12.48149, 41.89513 12.481250000000001, 41.89508 12.48117, 41.895010000000006 12.481110000000001, 41.894960000000005 12.48107, 41.89488 12.481050000000002, 41.89475 12.48107, 41.894580000000005 12.481090000000002, 41.894510000000004 12.481110000000001, 41.89446 12.481140000000002, 41.89423 12.481290000000001, 41.89423 12.481290000000001, 41.89416000000001 12.481380000000001, 41.894020000000005 12.48164, 41.894020000000005 12.48164, 41.89392 12.48174, 41.893890000000006 12.481770000000001, 41.89385 12.48178, 41.893840000000004 12.48178, 41.89378000000001 12.48179, 41.8937 12.48179, 41.893660000000004 12.48179, 41.893620000000006 12.48179, 41.893600000000006 12.48178, 41.893570000000004 12.481760000000001, 41.893530000000005 12.48173, 41.893480000000004 12.48168, 41.893420000000006 12.481620000000001, 41.89334 12.48154, 41.89325 12.481430000000001, 41.893170000000005 12.48132, 41.893040000000006 12.48112, 41.892950000000006 12.48098, 41.892900000000004 12.480910000000002, 41.892830000000004 12.480810000000002, 41.892770000000006 12.48075, 41.89269 12.480680000000001, 41.89262 12.480620000000002, 41.89246000000001 12.48051, 41.89222 12.480410000000001, 41.89204 12.480340000000002, 41.89186 12.48028, 41.89179 12.480260000000001, 41.89173 12.48027, 41.891600000000004 12.480290000000002, 41.89157 12.480290000000002, 41.891420000000004 12.48028, 41.891110000000005 12.48038, 41.89088 12.480480000000002, 41.89088 12.480480000000002, 41.88994 12.48084, 41.88985 12.48089, 41.889590000000005 12.481010000000001, 41.889590000000005 12.481010000000001, 41.889540000000004 12.48104, 41.889450000000004 12.481100000000001, 41.889410000000005 12.48117, 41.889300000000006 12.48122, 41.889230000000005 12.481250000000001, 41.88911 12.481290000000001, 41.888940000000005 12.48136, 41.88888 12.481390000000001, 41.88877 12.481430000000001, 41.888720000000006 12.481440000000001, 41.88861 12.48145, 41.88859 12.48145, 41.888540000000006 12.481440000000001, 41.88853 12.481440000000001, 41.88846 12.481420000000002, 41.888400000000004 12.481390000000001, 41.88837 12.481370000000002, 41.888250000000006 12.48132, 41.888130000000004 12.481240000000001, 41.888020000000004 12.48117, 41.88781 12.48108, 41.88781 12.48108, 41.887710000000006 12.481380000000001, 41.887660000000004 12.481510000000002, 41.88761 12.481630000000001, 41.8875 12.481910000000001, 41.88721 12.482240000000001, 41.88721 12.482240000000001, 41.88683 12.482730000000002, 41.886140000000005 12.48365, 41.886030000000005 12.48376, 41.88566 12.48427, 41.885380000000005 12.484760000000001, 41.8853 12.484910000000001, 41.885220000000004 12.485080000000002, 41.88505000000001 12.4854, 41.885000000000005 12.485500000000002, 41.88499 12.485570000000001, 41.88405 12.487150000000002, 41.88378 12.4876, 41.883610000000004 12.48789, 41.88353 12.488010000000001, 41.88351 12.488040000000002, 41.88346000000001 12.48812, 41.88346000000001 12.48812, 41.883950000000006 12.488760000000001, 41.88418 12.48901, 41.88418 12.48901, 41.884130000000006 12.489080000000001, 41.883970000000005 12.489350000000002, 41.88392 12.489460000000001, 41.88383 12.489630000000002, 41.88383 12.489630000000002, 41.883770000000005 12.489630000000002, 41.88374 12.489640000000001, 41.88367 12.489700000000001, 41.88349 12.4899, 41.88327 12.490110000000001, 41.883030000000005 12.490300000000001, 41.88290000000001 12.490390000000001, 41.88261000000001 12.4905, 41.88196000000001 12.490150000000002, 41.881780000000006 12.490100000000002, 41.88157 12.490060000000001, 41.881420000000006 12.490060000000001, 41.88136 12.490060000000001, 41.880750000000006 12.49014, 41.88026000000001 12.490240000000002, 41.88018 12.490250000000001, 41.880100000000006 12.490210000000001, 41.87988 12.490150000000002, 41.879830000000005 12.490120000000001, 41.879560000000005 12.489960000000002, 41.879250000000006 12.48975, 41.879220000000004 12.48972, 41.87917 12.489690000000001, 41.87908 12.48961, 41.87903 12.48957, 41.87903 12.48957, 41.87903 12.48956, 41.879020000000004 12.489550000000001, 41.879020000000004 12.489540000000002, 41.879020000000004 12.48953, 41.87901 12.48953, 41.87901 12.48952, 41.87901 12.489510000000001, 41.879000000000005 12.489510000000001, 41.879000000000005 12.489500000000001, 41.87899 12.489500000000001, 41.87899 12.489490000000002, 41.878980000000006 12.489490000000002, 41.87897 12.489490000000002, 41.87897 12.48948, 41.878960000000006 12.48948, 41.87895 12.48948, 41.87894 12.48948, 41.878930000000004 12.48948, 41.87892 12.48948, 41.87892 12.489490000000002, 41.878910000000005 12.489490000000002, 41.8789 12.489490000000002, 41.8789 12.489500000000001, 41.878890000000006 12.489500000000001, 41.878890000000006 12.489510000000001, 41.87888 12.48952, 41.87888 12.48953, 41.878870000000006 12.48953, 41.878870000000006 12.489540000000002, 41.878870000000006 12.489550000000001, 41.878870000000006 12.48956, 41.87886 12.48956, 41.87886 12.48957, 41.87886 12.489580000000002, 41.87886 12.489590000000002, 41.87886 12.489600000000001, 41.87883 12.48961, 41.87881 12.489630000000002, 41.878800000000005 12.489640000000001, 41.87876000000001 12.48971, 41.878710000000005 12.4898, 41.878490000000006 12.49017, 41.87834 12.49046, 41.878260000000004 12.490590000000001, 41.87814 12.490800000000002, 41.878040000000006 12.49094, 41.87794 12.491100000000001, 41.877840000000006 12.49126, 41.877750000000006 12.49139, 41.87769 12.491460000000002, 41.877610000000004 12.491560000000002, 41.877500000000005 12.49169, 41.877340000000004 12.491880000000002, 41.87709 12.4922, 41.87704 12.49225, 41.876990000000006 12.492320000000001, 41.87695 12.49238, 41.87693 12.492410000000001, 41.876900000000006 12.492460000000001, 41.876870000000004 12.49253, 41.876810000000006 12.492640000000002, 41.876760000000004 12.492730000000002, 41.87671 12.492840000000001, 41.876670000000004 12.492920000000002, 41.87664 12.49299, 41.87657 12.49314, 41.876290000000004 12.493530000000002, 41.8748 12.495600000000001, 41.874550000000006 12.49596, 41.874460000000006 12.496110000000002, 41.874340000000004 12.496290000000002, 41.87413 12.496480000000002, 41.87413 12.496480000000002, 41.87366 12.496480000000002, 41.873180000000005 12.49651, 41.873180000000005 12.49651, 41.873090000000005 12.496500000000001, 41.87288 12.496500000000001, 41.87203 12.49643, 41.871500000000005 12.49638, 41.871460000000006 12.49638, 41.87142 12.49638, 41.871340000000004 12.49637, 41.87127 12.496360000000001, 41.87126000000001 12.496360000000001, 41.871190000000006 12.496350000000001, 41.871080000000006 12.496340000000002, 41.870520000000006 12.49628, 41.87042 12.49627, 41.87041000000001 12.49627, 41.870340000000006 12.49628, 41.870180000000005 12.49627, 41.86994000000001 12.49623, 41.86965 12.496210000000001, 41.8688 12.496150000000002, 41.86844000000001 12.49614, 41.86826000000001 12.49614, 41.867900000000006 12.496210000000001, 41.8674 12.496290000000002, 41.867360000000005 12.496300000000002, 41.86732000000001 12.496310000000001, 41.86731 12.496310000000001, 41.867140000000006 12.496340000000002, 41.86712 12.496340000000002, 41.866060000000004 12.49665, 41.86591000000001 12.4967, 41.86486 12.497020000000001, 41.86486 12.497020000000001, 41.86471 12.496900000000002, 41.86471 12.496900000000002, 41.864520000000006 12.496970000000001, 41.864470000000004 12.49698, 41.86374 12.49721, 41.86374 12.49721, 41.86377 12.49735, 41.863800000000005 12.497480000000001, 41.86383 12.4976, 41.86388 12.497900000000001, 41.86404 12.498780000000002, 41.86404 12.498780000000002, 41.86363 12.498970000000002, 41.86356000000001 12.499030000000001, 41.86348 12.499130000000001, 41.86332 12.49938, 41.8633 12.49942, 41.86328 12.499440000000002, 41.86328 12.499440000000002, 41.863220000000005 12.499530000000002, 41.86274 12.50045, 41.862700000000004 12.500530000000001, 41.862660000000005 12.500610000000002, 41.862260000000006 12.501380000000001, 41.862260000000006 12.501380000000001, 41.86162 12.501420000000001, 41.86162 12.501420000000001, 41.860890000000005 12.501050000000001, 41.860040000000005 12.50074, 41.85967 12.5006, 41.85967 12.5006, 41.85954 12.500530000000001, 41.85922 12.50191, 41.85922 12.50191, 41.859210000000004 12.50192, 41.8592 12.50192, 41.859190000000005 12.50192, 41.85918 12.501930000000002, 41.859170000000006 12.501930000000002, 41.85915000000001 12.501940000000001, 41.859140000000004 12.501940000000001, 41.85913 12.50195, 41.859120000000004 12.50196, 41.85911 12.501980000000001, 41.859100000000005 12.502, 41.85909 12.502020000000002, 41.859080000000006 12.502040000000001, 41.85907 12.50206, 41.85906000000001 12.502080000000001, 41.85905 12.502110000000002, 41.859030000000004 12.502160000000002, 41.859030000000004 12.50219, 41.85902 12.502220000000001, 41.85902 12.502250000000002, 41.85902 12.50229, 41.859030000000004 12.502320000000001, 41.859030000000004 12.502350000000002, 41.85904 12.50238, 41.85905 12.502410000000001, 41.859080000000006 12.502440000000002, 41.85909 12.50247, 41.85911 12.502490000000002, 41.85913 12.502510000000001, 41.85915000000001 12.50253, 41.859170000000006 12.502550000000001, 41.859190000000005 12.50256, 41.859210000000004 12.50256, 41.85924000000001 12.50257, 41.859260000000006 12.50257, 41.85929 12.50256, 41.85931 12.50262, 41.859320000000004 12.502640000000001, 41.859320000000004 12.50266, 41.85933 12.502690000000001, 41.85933 12.502740000000001, 41.859320000000004 12.502830000000001, 41.859320000000004 12.50294, 41.859320000000004 12.503110000000001, 41.85931 12.503300000000001, 41.859190000000005 12.504230000000002, 41.859170000000006 12.504430000000001, 41.85916 12.504570000000001, 41.85916 12.50481, 41.85916 12.505370000000001, 41.85915000000001 12.505510000000001, 41.85913 12.505630000000002, 41.859080000000006 12.5058, 41.859010000000005 12.50594, 41.858920000000005 12.506110000000001, 41.858880000000006 12.506240000000002, 41.858720000000005 12.50683, 41.858630000000005 12.507150000000001, 41.85839 12.508140000000001, 41.85813 12.508970000000001, 41.857820000000004 12.51008, 41.857820000000004 12.51008, 41.857730000000004 12.51017, 41.857620000000004 12.510280000000002, 41.85755 12.51035, 41.85746 12.510420000000002, 41.857330000000005 12.510530000000001, 41.857220000000005 12.51059, 41.85712 12.51064, 41.856930000000006 12.510700000000002, 41.85634 12.51087, 41.8558 12.51101, 41.85566 12.51107, 41.855540000000005 12.511140000000001, 41.855500000000006 12.511180000000001, 41.855450000000005 12.511220000000002, 41.85537 12.5113, 41.855320000000006 12.511360000000002, 41.85526 12.51144, 41.85513 12.51163, 41.85499 12.51182, 41.8549 12.511940000000001, 41.85479 12.51205, 41.8547 12.512170000000001, 41.854600000000005 12.512310000000001, 41.854420000000005 12.512480000000002, 41.854200000000006 12.51266, 41.853970000000004 12.512820000000001, 41.85372 12.513010000000001, 41.85336 12.51327, 41.85291 12.513630000000001, 41.85204 12.514180000000001, 41.8513 12.514600000000002, 41.85112 12.514700000000001, 41.85092 12.514790000000001, 41.85071000000001 12.51487, 41.84984 12.515170000000001, 41.84955 12.515270000000001, 41.849230000000006 12.51538, 41.848690000000005 12.515490000000002, 41.84845000000001 12.515490000000002, 41.84837 12.515500000000001, 41.848150000000004 12.51556, 41.84805 12.515590000000001, 41.84798000000001 12.51561, 41.8479 12.515640000000001, 41.84769 12.515720000000002, 41.847390000000004 12.515880000000001, 41.847260000000006 12.515950000000002, 41.84713 12.516020000000001, 41.84702 12.516060000000001, 41.84691 12.516100000000002, 41.84673 12.516160000000001, 41.84653 12.51622, 41.84624 12.516280000000002, 41.84592000000001 12.516340000000001, 41.84566 12.516350000000001, 41.84555 12.516350000000001, 41.84548 12.516340000000001, 41.84541 12.516330000000002, 41.84532 12.516300000000001, 41.84526 12.51627, 41.84519 12.516240000000002, 41.84508 12.51618, 41.84496 12.516110000000001, 41.844820000000006 12.51603, 41.844460000000005 12.51579, 41.8442 12.51561, 41.843970000000006 12.515540000000001, 41.843770000000006 12.515490000000002, 41.84362 12.51547, 41.84347 12.51547, 41.84329 12.515490000000002, 41.84306 12.51556, 41.842710000000004 12.515730000000001, 41.84257 12.51579, 41.84239 12.515870000000001, 41.84216000000001 12.516010000000001, 41.841710000000006 12.516300000000001, 41.84116 12.516710000000002, 41.84104000000001 12.516800000000002, 41.84075 12.51702, 41.840210000000006 12.517470000000001, 41.839760000000005 12.51781, 41.83945000000001 12.517990000000001, 41.83928 12.51809, 41.83898000000001 12.518220000000001, 41.838570000000004 12.51834, 41.8382 12.51852, 41.837880000000006 12.51867, 41.83775000000001 12.51871, 41.8376 12.518740000000001, 41.837410000000006 12.518780000000001, 41.83695 12.518780000000001, 41.836670000000005 12.5188, 41.8363 12.518830000000001, 41.836130000000004 12.518830000000001, 41.83599 12.5188, 41.835840000000005 12.518770000000002, 41.835730000000005 12.518730000000001, 41.83532 12.518590000000001, 41.83516 12.51853, 41.834970000000006 12.51843, 41.834120000000006 12.517900000000001, 41.83397 12.517830000000002, 41.833870000000005 12.517800000000001, 41.83366 12.517740000000002, 41.832770000000004 12.517570000000001, 41.832530000000006 12.517520000000001, 41.832350000000005 12.517470000000001, 41.83182 12.51735, 41.831700000000005 12.517330000000001, 41.831590000000006 12.517320000000002, 41.831480000000006 12.517330000000001, 41.83138 12.51735, 41.83122 12.5174, 41.831050000000005 12.51748, 41.830400000000004 12.517850000000001, 41.82977 12.517990000000001, 41.829480000000004 12.51806, 41.8293 12.518110000000002, 41.82884000000001 12.518260000000001, 41.828720000000004 12.51828, 41.828210000000006 12.51833, 41.82779 12.51837, 41.827540000000006 12.518390000000002, 41.827420000000004 12.518390000000002, 41.827290000000005 12.518390000000002, 41.82721 12.51838, 41.827160000000006 12.518360000000001, 41.82712 12.51834, 41.82708 12.518300000000002, 41.827020000000005 12.518210000000002, 41.82699 12.518160000000002, 41.82697 12.518080000000001, 41.82696000000001 12.518, 41.82696000000001 12.518, 41.826930000000004 12.51786, 41.82692 12.51782, 41.826910000000005 12.517790000000002, 41.82688 12.51773, 41.82678000000001 12.51762, 41.826220000000006 12.51748, 41.826150000000005 12.51748, 41.826080000000005 12.517500000000002, 41.82602000000001 12.51754, 41.825950000000006 12.51763, 41.825880000000005 12.517780000000002, 41.825860000000006 12.51786, 41.82584000000001 12.518070000000002, 41.82584000000001 12.518070000000002, 41.825070000000004 12.518040000000001, 41.82468 12.51801, 41.824510000000004 12.517980000000001, 41.8243 12.51801, 41.824130000000004 12.51805, 41.823930000000004 12.51815, 41.823710000000005 12.518300000000002, 41.823240000000006 12.518650000000001, 41.822610000000005 12.51913, 41.821220000000004 12.52025, 41.82115 12.52031, 41.820550000000004 12.520800000000001, 41.820350000000005 12.52096, 41.819950000000006 12.521270000000001, 41.819770000000005 12.521410000000001, 41.81965 12.521500000000001, 41.819250000000004 12.521740000000001, 41.819010000000006 12.521830000000001, 41.818810000000006 12.521920000000001, 41.81851 12.52203, 41.8183 12.522110000000001, 41.818200000000004 12.52214, 41.81797 12.52218, 41.81777 12.522210000000001, 41.81691 12.52228, 41.815960000000004 12.522380000000002, 41.8156 12.52242, 41.81537 12.52246, 41.81523000000001 12.522520000000002, 41.815090000000005 12.5226, 41.814960000000006 12.5227, 41.814750000000004 12.52288, 41.814550000000004 12.52312, 41.81436 12.52335, 41.8141 12.52372, 41.813930000000006 12.52397, 41.81374 12.524270000000001, 41.81356 12.524600000000001, 41.81333 12.525030000000001, 41.81318 12.52533, 41.81311 12.52547, 41.81304 12.525570000000002, 41.81295 12.525670000000002, 41.812850000000005 12.525760000000002, 41.812760000000004 12.525810000000002, 41.81262 12.525870000000001, 41.812450000000005 12.525920000000001, 41.81228 12.52599, 41.812180000000005 12.526060000000001, 41.8119 12.5263, 41.81176000000001 12.526430000000001, 41.81161 12.526570000000001, 41.81152 12.52669, 41.81145 12.526790000000002, 41.811350000000004 12.52696, 41.81112 12.52739, 41.810950000000005 12.527660000000001, 41.81074 12.527930000000001, 41.810590000000005 12.528110000000002, 41.81044000000001 12.52829, 41.81013 12.528620000000002, 41.80969 12.529050000000002, 41.809380000000004 12.529330000000002, 41.8091 12.52955, 41.80903 12.5296, 41.808910000000004 12.52968, 41.80877 12.52979, 41.80866 12.529900000000001, 41.80854 12.53006, 41.80801 12.53091, 41.807970000000005 12.530980000000001, 41.80785 12.531220000000001, 41.80771 12.531440000000002, 41.80754 12.531680000000001, 41.80729 12.53198, 41.80702 12.532350000000001, 41.806920000000005 12.532580000000001, 41.806720000000006 12.53301, 41.80655 12.53334, 41.80635 12.53359, 41.80622 12.533740000000002, 41.80566 12.533940000000001, 41.80525 12.5342, 41.804030000000004 12.535100000000002, 41.80344 12.53561, 41.803250000000006 12.535770000000001, 41.802730000000004 12.53607, 41.802130000000005 12.536330000000001, 41.801680000000005 12.536420000000001, 41.801570000000005 12.53644, 41.80151 12.53645, 41.8014 12.536460000000002, 41.80133 12.536470000000001, 41.80115000000001 12.536480000000001, 41.800990000000006 12.536470000000001, 41.800630000000005 12.5364, 41.8004 12.53635, 41.80013 12.53625, 41.799820000000004 12.53611, 41.799290000000006 12.535820000000001, 41.79885 12.5355, 41.79798 12.534920000000001, 41.79786 12.53484, 41.79757 12.5347, 41.79744 12.53466, 41.79731 12.534640000000001, 41.7973 12.534640000000001, 41.797140000000006 12.534630000000002, 41.79686 12.53461, 41.796670000000006 12.53461, 41.795910000000006 12.53462, 41.79572 12.53466, 41.795550000000006 12.53471, 41.795370000000005 12.5348, 41.794720000000005 12.53514, 41.79411 12.53542, 41.79381 12.53556, 41.79356000000001 12.535660000000002, 41.793200000000006 12.535710000000002, 41.793060000000004 12.535660000000002, 41.792880000000004 12.535620000000002, 41.792190000000005 12.535480000000002, 41.791830000000004 12.5356, 41.791360000000005 12.53578, 41.791180000000004 12.535910000000001, 41.79097 12.53602, 41.79084 12.53607, 41.790530000000004 12.53621, 41.78989000000001 12.5365, 41.78923 12.53682, 41.789170000000006 12.53683, 41.787940000000006 12.537350000000002, 41.78783000000001 12.53738, 41.78755 12.537510000000001, 41.78737 12.537560000000001, 41.78726 12.537590000000002, 41.78716 12.537600000000001, 41.787040000000005 12.537600000000001, 41.78692 12.537590000000002, 41.786620000000006 12.537550000000001, 41.78634 12.53747, 41.786080000000005 12.537400000000002, 41.785830000000004 12.537320000000001, 41.785470000000004 12.537260000000002, 41.78517 12.53724, 41.784870000000005 12.537270000000001, 41.784580000000005 12.53734, 41.78436000000001 12.53739, 41.784180000000006 12.537540000000002, 41.784020000000005 12.537740000000001, 41.78376 12.53823, 41.783480000000004 12.53902, 41.78341 12.539200000000001, 41.783300000000004 12.53955, 41.7832 12.539890000000002, 41.783100000000005 12.5401, 41.78302 12.540220000000001, 41.782920000000004 12.540350000000002, 41.782790000000006 12.540450000000002, 41.782230000000006 12.540790000000001, 41.78144 12.54132, 41.78097 12.541710000000002, 41.780860000000004 12.54179, 41.78078 12.541730000000001, 41.78056 12.541670000000002, 41.78032 12.5416, 41.77991 12.541480000000002, 41.779500000000006 12.541400000000001, 41.7792 12.541340000000002, 41.778940000000006 12.54127, 41.778740000000006 12.541200000000002, 41.77859 12.541110000000002, 41.77852 12.541070000000001, 41.77834 12.54099, 41.778200000000005 12.540930000000001, 41.77808 12.54091, 41.77805 12.540920000000002, 41.77801 12.540920000000002, 41.777950000000004 12.54094, 41.7779 12.540970000000002, 41.77783 12.541020000000001, 41.777770000000004 12.541070000000001, 41.777730000000005 12.54114, 41.77765 12.54127, 41.77738 12.541820000000001, 41.777260000000005 12.542090000000002, 41.77713000000001 12.54236, 41.77703 12.54263, 41.77698 12.54277, 41.77693 12.542930000000002, 41.776700000000005 12.54376, 41.77657000000001 12.544160000000002, 41.77628000000001 12.544740000000001, 41.77588 12.545560000000002, 41.77586 12.545580000000001, 41.77582 12.54564, 41.77573 12.545800000000002, 41.77507000000001 12.546790000000001, 41.77478000000001 12.547260000000001, 41.774660000000004 12.547500000000001, 41.7745 12.54784, 41.774370000000005 12.548110000000001, 41.774280000000005 12.54831, 41.774060000000006 12.548680000000001, 41.77371 12.54916, 41.7734 12.549760000000001, 41.77306 12.550440000000002, 41.77302 12.550510000000001, 41.77272000000001 12.551150000000002, 41.772670000000005 12.55127, 41.772040000000004 12.552890000000001, 41.771840000000005 12.553410000000001, 41.7715 12.55433, 41.771040000000006 12.555570000000001, 41.77084000000001 12.55606, 41.77075000000001 12.55625, 41.77069 12.556360000000002, 41.77064 12.55643, 41.770610000000005 12.55648, 41.77055 12.556540000000002, 41.77042 12.556650000000001, 41.770340000000004 12.55671, 41.77024 12.55677, 41.77011 12.556840000000001, 41.769980000000004 12.556890000000001, 41.76977 12.556980000000001, 41.76934000000001 12.557110000000002, 41.76915 12.55714, 41.768710000000006 12.557160000000001, 41.76816 12.557200000000002, 41.76771 12.55724, 41.767450000000004 12.557310000000001, 41.76711 12.557440000000001, 41.76681000000001 12.557580000000002, 41.766420000000004 12.557770000000001, 41.766110000000005 12.55788, 41.76594 12.557920000000001, 41.76554 12.557970000000001, 41.765330000000006 12.558010000000001, 41.765190000000004 12.558040000000002, 41.76511 12.55807, 41.76503 12.55812, 41.764970000000005 12.55816, 41.76487 12.558230000000002, 41.764520000000005 12.558510000000002, 41.76451 12.558510000000002, 41.76427 12.55869, 41.7642 12.55873, 41.76404 12.558810000000001, 41.763870000000004 12.558890000000002, 41.76339 12.559030000000002, 41.763000000000005 12.559080000000002, 41.762930000000004 12.559090000000001, 41.76288 12.5591, 41.76283 12.55911, 41.76279 12.559130000000001, 41.76276 12.55915, 41.762730000000005 12.559180000000001, 41.7627 12.559220000000002, 41.762660000000004 12.559310000000002, 41.76256 12.55967, 41.762530000000005 12.559750000000001, 41.7625 12.55981, 41.76247 12.559870000000002, 41.762420000000006 12.559930000000001, 41.762370000000004 12.559970000000002, 41.76212 12.56015, 41.76194 12.560270000000001, 41.76182 12.56033, 41.761750000000006 12.56037, 41.76169 12.560390000000002, 41.761610000000005 12.560410000000001, 41.76153 12.56042, 41.76144 12.56043, 41.76135 12.56043, 41.76046 12.5601, 41.75977 12.559840000000001, 41.75943 12.559730000000002, 41.75903 12.559650000000001, 41.758790000000005 12.559640000000002, 41.758630000000004 12.559640000000002, 41.75847 12.55963, 41.758300000000006 12.55963, 41.758160000000004 12.559650000000001, 41.75804 12.55968, 41.757920000000006 12.559730000000002, 41.757870000000004 12.559750000000001, 41.757810000000006 12.55971, 41.757670000000005 12.55977, 41.75746 12.55982, 41.757310000000004 12.55986, 41.75717 12.559870000000002, 41.75706 12.55986, 41.756980000000006 12.559840000000001, 41.75685 12.559790000000001');
        $l2 = clone $l;
        $polygon_gra = \LorenzoGiust\GeoLaravel\Polygon::import('41.9881730779 12.498579025299932, 41.9890981202 12.499909400900037, 41.9899912518 12.501068115200042, 41.9903261729 12.501776218399982, 41.9905335041 12.502570152299995, 41.9906451437 12.503449916800037, 41.9906610922 12.504329681400009, 41.9907248862 12.50581026079999, 41.9906929892 12.50729084010004, 41.9906291952 12.508170604700013, 41.9904378128 12.509050369299985, 41.9901028923 12.510080337499971, 41.9896244314 12.511196136499962, 41.9890024268 12.512569427500011, 41.9883804161 12.513942718499948, 41.9741921381 12.545056343099986, 41.9671606311 12.560827732100051, 41.9599368739 12.576770782500034, 41.9591071464 12.578444480899975, 41.9579901886 12.58003234860007, 41.9562349295 12.582263946500007, 41.9539849357 12.584753036499933, 41.946755695 12.590332031199978, 41.9310336554 12.60277748110002, 41.9232031129 12.609000206000019, 41.919319414 12.612025737799968, 41.9172816747 12.61362433429997, 41.9162308464 12.614380717300037, 41.9155290372 12.615020424100067, 41.9146994802 12.615230977500005, 41.9123696773 12.615437507600063, 41.8933648111 12.61479377750004, 41.890665342 12.614750862099982, 41.8879657588 12.613720893899995, 41.8765911141 12.607605457299996, 41.8709030324 12.604333162300009, 41.867994885 12.60291159150006, 41.8666685981 12.601943314100026, 41.8651824848 12.60114669799998, 41.8626256499 12.59977340699993, 41.8547147946 12.597584724400008, 41.8468029608 12.594966888399995, 41.8383306195 12.590289115899964, 41.8337263108 12.587649822199978, 41.8253641672 12.582274675399958, 41.8241329372 12.58142709729998, 41.8190798491 12.577865123700008, 41.8165691476 12.576137781099987, 41.8152817752 12.575359940499993, 41.8140103696 12.574260234800022, 41.8127229458 12.572554349899974, 41.8120062553 12.57133796810001, 41.8114814769 12.570035755599974, 41.8103359456 12.567645907399992, 41.808486659 12.56414026020002, 41.8074660299 12.562301605899961, 41.8048778974 12.557802200299989, 41.8033903486 12.555184364299976, 41.8020307309 12.552609443700021, 41.8010709833 12.550184726699968, 41.800175206 12.546740770299948, 41.7994713721 12.543811798100023, 41.7980316879 12.53720283510006, 41.79727984 12.533898353599966, 41.7965919714 12.530636787399999, 41.7956321424 12.526302337599986, 41.7951842173 12.521882057199946, 41.794672299 12.51671075820002, 41.7944963262 12.514210939399959, 41.7943443492 12.511609196699965, 41.794332351 12.509557306799934, 41.7945123237 12.507591247599976, 41.795872101 12.496798038499946, 41.7965519788 12.490736246100028, 41.7972958369 12.484545707700022, 41.7990874595 12.470190525099952, 41.7999192673 12.462884187699956, 41.8003511632 12.459359765099975, 41.8010069997 12.453989982599978, 41.8015508589 12.449676990499938, 41.8021267048 12.445363998400012, 41.8031184274 12.43712425230001, 41.8032463905 12.435836792000032, 41.8036942592 12.433304786699978, 41.8040781443 12.431995868700028, 41.8048139175 12.429699897799992, 41.8065413518 12.42450714109998, 41.8076609603 12.420816421500035, 41.808556633 12.414250373799973, 41.8091004281 12.410452365900028, 41.809372324 12.40893959999994, 41.8097081938 12.406911850000029, 41.8101560174 12.404723167399993, 41.8106358249 12.40270614619999, 41.8110996354 12.400903701799962, 41.8116194191 12.399401664700008, 41.8121831797 12.398135662100003, 41.8128748792 12.396783828699995, 41.8134186377 12.395818233499995, 41.8150818704 12.393736839300004, 41.8165691476 12.39232063290001, 41.8172807896 12.391773462299966, 41.8180403987 12.39131212229995, 41.8198314413 12.390421629000002, 41.8216863969 12.389810085300041, 41.8301209699 12.387160062800035, 41.8359685546 12.385491728799934, 41.8396275199 12.38435715440005, 41.8449487329 12.382364273099938, 41.8497760071 12.380132675200002, 41.8546988121 12.37807273859994, 41.8594134813 12.376012802100036, 41.8624418735 12.374768257099959, 41.8634766079 12.374188900000036, 41.8641697507 12.374156713500042, 41.8650116994 12.37401187420005, 41.8659495153 12.37416744229995, 41.8675155074 12.374382018999995, 41.8722452097 12.376828193700021, 41.8746738398 12.378051281000012, 41.8769745621 12.379531860399993, 41.8806811071 12.381248474099948, 41.8959523608 12.38193511960003, 41.9036824404 12.384338378899997, 41.907642945 12.384896278399992, 41.9117948232 12.385797500600006, 41.9193313888 12.383823394799947, 41.9215187422 12.382750511200015, 41.9231552168 12.381956577300002, 41.9243126978 12.381763458299929, 41.9253663864 12.38167762759997, 41.9273459968 12.381377220199965, 41.9290541595 12.381227016399976, 41.9307622766 12.381162643399989, 41.9325501632 12.381033897400016, 41.9344976255 12.381291389500007, 41.9431327869 12.38238573069998, 41.9474818478 12.382847070699995, 41.9518944449 12.383437156699983, 41.9531870465 12.383458614300025, 41.9544157917 12.383823394799947, 41.9556445133 12.384381294300056, 41.9571923495 12.385754585299992, 41.9624898138 12.394230365800013, 41.9652022003 12.398639917400033, 41.9666540774 12.400973439200015, 41.9684250035 12.40382194519998, 41.9693184251 12.405796051000038, 41.9699246683 12.40798473359996, 41.9703873237 12.410795688600047, 41.9708180688 12.413306236300059, 41.9712886944 12.414931654899988, 41.9718869423 12.41655707359996, 41.9730834211 12.41955041890003, 41.9744234507 12.422629594800014, 41.9758910699 12.425150871300048, 41.9773905588 12.427403926800025, 41.9782040966 12.428444623899964, 41.9792409434 12.43098735809997, 41.9803894309 12.434935569800018, 41.9809477159 12.437703609499977, 41.9812188812 12.439227104199972, 41.9816336023 12.441673278799954, 41.9819526167 12.443904876700003, 41.9820483207 12.445063591000007, 41.9819526167 12.446222305300012, 41.9814102912 12.450299263000034, 41.9811869794 12.452359199500052, 41.9810912741 12.45441913600007, 41.9811869794 12.456189394000035, 41.9812188812 12.457959651899955, 41.9815378976 12.459729909900034, 41.981984518 12.461285591100022, 41.9825148756 12.462562322599979, 41.9829814272 12.463624477400003, 41.983691217 12.465448379500003, 41.9844966993 12.46785163879997, 41.9848037368 12.469010353099975, 41.9850469733 12.470254898099938, 41.9856371171 12.473452091199988, 41.9859481366 12.475823163999962, 41.9862113057 12.478451728799996, 41.9862033309 12.481563091300018, 41.9860657653 12.483735680600034, 41.985736803 12.485908269899937, 41.9854317636 12.488670945200056, 41.9855414185 12.490210533100026, 41.985573318 12.491379976299982, 41.9856690166 12.492506504099993, 41.9857567401 12.493568658799973, 41.9859720611 12.494630813599997, 41.9863708017 12.495698332799975, 41.9869768825 12.496722936600008, 41.9875909323 12.497672438600034, 41.9881730779 12.498579025299932');
        $intersection = Geo::intersect($polygon_gra->linestrings[0], $l);
        $l->insertPoint($intersection[0]);

        assertTrue( count($l) == count($l2)+1 );

        $diff = LineString::diff($l, $l2);
        assertTrue( in_array($intersection, $diff) );
    }

}
